{% extends "base.html" %}
{% load quiz_extras %}

{% block title %}Result{% endblock %}

{% block content %}
<h1>Result</h1>

<div class="card">
    <p><b>Student:</b> {{ submission.student_name }}</p>
    <p><b>Quiz:</b> {{ quiz.title }}</p>
    <p><b>Score:</b> {{ submission.score }} / {{ submission.total }}</p>
</div>

<h2>Review</h2>

{% for a in answers %}
  <div class="qbox">
    <div class="qtext">
      <b>Q{{ forloop.counter }}.</b> {{ a.question.text }}
    </div>

    <p>
      <b>Your answer:</b> {{ a.question|option_text:a.selected }}
      |
      <b>Correct:</b> {{ a.question|option_text:a.question.correct_option }}

      {% if a.is_correct %}
        <span class="ok">Correct</span>
      {% else %}
        <span class="bad">Wrong</span>
      {% endif %}
    </p>
  </div>
{% endfor %}

<hr>

<div style="margin-top:20px; display:flex; gap:12px;">
  <a href="{% url 'student_dashboard' %}" class="btn secondary">
    ⬅ Back to Dashboard
  </a>

  <a href="{% url 'home' %}" class="btn">
    ➕ Take Another Quiz
  </a>
</div>

{% endblock %}
